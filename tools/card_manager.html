<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>GalaxyWeb Card Management</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-check-compat.js"></script>
<script src="https://www.google.com/recaptcha/api.js?render=6Ld395IrAAAAAIvG4gyf0vUJeI_jKOsI9XVn0jUx"></script>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #181f2b;
    color: white;
    margin: 0; padding: 30px;
  }
  h1 {
    color: #fab84f;
    text-align: center;
  }
  form {
    max-width: 540px;
    margin: auto;
    background: #232e40;
    padding: 20px;
    border-radius: 12px;
  }
  label {
    display: block;
    margin-top: 12px;
    font-weight: bold;
  }
  input[type="text"], textarea {
    width: 100%;
    padding: 8px;
    margin-top: 6px;
    border-radius: 6px;
    border: none;
    font-size: 1rem;
  }
  textarea {
    resize: vertical;
    height: 100px;
  }
  button {
    margin-top: 16px;
    background: #fab84f;
    color: #181f2b;
    font-weight: bold;
    border: none;
    padding: 14px;
    width: 100%;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1.1rem;
  }
  button:hover {
    opacity: 0.9;
  }
  .message {
    max-width: 540px;
    margin: 20px auto;
    text-align: center;
    font-weight: bold;
    color: #6cdbf7;
  }
</style>
</head>
<body>

<h1>GalaxyWeb Card Management</h1>

<form id="cardForm">
  <label for="heading">Heading:</label>
  <input type="text" id="heading" name="heading" required maxlength="100" placeholder="Enter heading" />

  <label for="description">Description:</label>
  <textarea id="description" name="description" required maxlength="500" placeholder="Enter description"></textarea>

  <label for="imageUrl">Image URL:</label>
  <input type="text" id="imageUrl" name="imageUrl" required placeholder="Enter image URL (https://...)" />

  <button type="submit">Add Card</button>
</form>

<div class="message" id="messageBox"></div>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyD0Yv_bQjxi2_kjzPR4XHOlaB7Sb6NRVUc",
    authDomain: "teamgalaxy-77344.firebaseapp.com",
    projectId: "teamgalaxy-77344",
    storageBucket: "teamgalaxy-77344.firebasestorage.app",
    messagingSenderId: "770256225320",
    appId: "1:770256225320:web:5a363ebd757de6cde3a11d",
    measurementId: "G-6C2W9NSNCH"
  };

  firebase.initializeApp(firebaseConfig);

  // App Check
  try {
    const appCheckProvider = new firebase.appCheck.ReCaptchaV3Provider('6Ld395IrAAAAAIvG4gyf0vUJeI_jKOsI9XVn0jUx');
    firebase.appCheck().activate(appCheckProvider, true);
  } catch (e) {
    console.warn('App Check activation failed:', e);
  }

  const db = firebase.firestore();

  const cardForm = document.getElementById('cardForm');
  const messageBox = document.getElementById('messageBox');

  cardForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    messageBox.textContent = "";

    const heading = cardForm.heading.value.trim();
    const description = cardForm.description.value.trim();
    const imageUrl = cardForm.imageUrl.value.trim();

    if (!heading || !description || !imageUrl) {
      messageBox.textContent = "Please fill all fields correctly.";
      return;
    }

    try {
      await db.collection('cards').add({
        heading,
        description,
        imageUrl,
        views: 0,
        likes: 0,
        publishedAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      messageBox.style.color = "#6cdbf7";
      messageBox.textContent = "Card added successfully!";
      cardForm.reset();
    } catch (error) {
      messageBox.style.color = "red";
      messageBox.textContent = "Error adding card: " + error.message;
    }
  });
</script>

</body>
</html>
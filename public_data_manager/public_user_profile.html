<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Public Profile - TeamGalaxy</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #e0e0ff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background: rgba(10, 10, 35, 0.95);
      backdrop-filter: blur(15px);
      border-bottom: 1px solid #5a4fcf;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      font-size: 2rem;
      font-weight: bold;
      color: #8a7cff;
      letter-spacing: 1.5px;
      text-shadow: 0 0 10px rgba(138, 124, 255, 0.5);
      background: linear-gradient(45deg, #8a7cff, #d66efd);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .public-label {
      font-size: 1.8rem;
      font-weight: bold;
      color: #8a7cff;
      letter-spacing: 1.5px;
      text-shadow: 0 0 10px rgba(138, 124, 255, 0.5);
      background: linear-gradient(45deg, #8a7cff, #d66efd);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Main Content */
    .container {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1.5rem;
      flex: 1;
    }

    .profile-card {
      background: rgba(20, 20, 40, 0.85);
      border-radius: 20px;
      padding: 3rem;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      border: 1px solid #5a4fcf;
      backdrop-filter: blur(10px);
      margin-bottom: 2rem;
      width: 100%;
      position: relative;
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 2rem;
      margin-bottom: 2.5rem;
      flex-wrap: wrap;
    }

    .profile-photo {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #6a5af9;
      background: linear-gradient(45deg, #6a5af9, #d66efd);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      box-shadow: 0 0 20px rgba(106, 90, 249, 0.3);
    }

    .profile-info {
      flex: 1;
      min-width: 300px;
    }

    .profile-name {
      font-size: 2.5rem;
      font-weight: bold;
      color: #ffffff;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    }

    .profile-slug {
      font-size: 1.3rem;
      color: #b1a6ff;
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .verified-badge {
      display: inline-block;
      background: linear-gradient(45deg, #6a5af9, #d66efd);
      color: white;
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 0 10px rgba(106, 90, 249, 0.3);
    }

    .join-date, .email {
      color: #a0a0d0;
      font-size: 1.1rem;
      margin: 0.3rem 0;
    }

    .profile-actions {
      position: absolute;
      top: 2rem;
      right: 2rem;
    }

    .btn-share {
      padding: 0.7rem 1.4rem;
      border-radius: 8px;
      border: 1px solid rgba(138, 124, 255, 0.3);
      background: rgba(20, 20, 40, 0.5);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      color: #b1a6ff;
      backdrop-filter: blur(10px);
    }

    .btn-share:hover {
      background: rgba(30, 30, 60, 0.7);
      border: 1px solid rgba(138, 124, 255, 0.6);
      box-shadow: 0 0 15px rgba(138, 124, 255, 0.2);
    }

    .bio-section {
      margin: 2.5rem 0;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #d0c4ff;
      margin-bottom: 1.5rem;
      padding-bottom: 0.8rem;
      border-bottom: 2px solid #5a4fcf;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .bio-text {
      line-height: 1.7;
      color: #c0c0e0;
      font-size: 1.15rem;
    }

    .profile-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2.5rem;
    }

    .stat-card {
      background: rgba(40, 40, 70, 0.6);
      padding: 2rem;
      border-radius: 15px;
      text-align: center;
      border: 1px solid #5a4fcf;
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-value {
      font-size: 2.5rem;
      font-weight: bold;
      color: #8a7cff;
      margin-bottom: 0.8rem;
      text-shadow: 0 0 10px rgba(138, 124, 255, 0.3);
    }

    .stat-label {
      color: #b1a6ff;
      font-size: 1.1rem;
    }

    /* Posts Section */
    .posts-section {
      background: rgba(20, 20, 40, 0.85);
      border-radius: 20px;
      padding: 3rem;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      border: 1px solid #5a4fcf;
      backdrop-filter: blur(10px);
      margin-bottom: 2rem;
    }

    .posts-grid {
      display: grid;
      grid-template-columns: 1fr; /* Single column for single post */
      gap: 2rem;
      margin-top: 2rem;
    }

    .post-card {
      background: rgba(30, 30, 50, 0.7);
      border-radius: 15px;
      padding: 1.8rem;
      border: 1px solid #5a4fcf;
      transition: transform 0.3s ease;
    }

    .post-card:hover {
      transform: translateY(-5px);
      border-color: #8a7cff;
    }

    .post-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 0.8rem;
    }

    .post-body {
      color: #c0c0e0;
      line-height: 1.6;
      margin-bottom: 1.2rem;
      font-size: 1rem;
    }

    .post-meta {
      display: flex;
      justify-content: space-between;
      color: #a0a0d0;
      font-size: 0.9rem;
      border-top: 1px solid #4a4a8a;
      padding-top: 1rem;
    }

    .post-author {
      color: #8a7cff;
    }

    .post-time {
      color: #8a7cff;
      font-size: 0.85rem;
      font-style: italic;
    }

    .comments-section {
      margin-top: 2.5rem;
    }

    .comments-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .comment-card {
      background: rgba(40, 40, 60, 0.6);
      border-radius: 12px;
      padding: 1.2rem;
      border: 1px solid #4a4a8a;
      display: flex;
      flex-direction: column;
    }

    .comment-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.8rem;
    }

    .comment-author {
      font-weight: 600;
      color: #8a7cff;
    }

    .comment-time {
      font-size: 0.8rem;
      color: #a0a0d0;
      font-style: italic;
    }

    .comment-body {
      color: #c0c0e0;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .post-actions {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      justify-content: center;
    }

    .btn-post {
      padding: 0.9rem 2rem;
      border-radius: 8px;
      border: 1px solid rgba(138, 124, 255, 0.3);
      background: rgba(20, 20, 40, 0.5);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 1rem;
      color: #b1a6ff;
      backdrop-filter: blur(10px);
    }

    .btn-post:hover {
      background: rgba(30, 30, 60, 0.7);
      border: 1px solid rgba(138, 124, 255, 0.6);
      box-shadow: 0 0 15px rgba(138, 124, 255, 0.2);
    }

    /* Footer */
    .footer {
      background: rgba(10, 10, 35, 0.95);
      padding: 3rem 2rem 2rem;
      margin-top: 3rem;
      border-top: 1px solid #5a4fcf;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
    }

    .footer-about-title {
      font-size: 1.1rem;
      color: #8a7cff;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .footer-about-text {
      color: #a0a0d0;
      line-height: 1.6;
      font-size: 0.90rem;
    }

    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .footer-links a {
      color: #a0a0d0;
      text-decoration: none;
      font-size: 0.95rem;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: #8a7cff;
      text-decoration: underline;
    }

    .rocket-frame {
      margin-top: 2rem;
      padding: 1.5rem;
      border: 2px solid #5a4fcf;
      border-radius: 12px;
      background: rgba(20, 20, 40, 0.5);
      position: relative;
      overflow: hidden;
    }

    .rocket-text {
      font-size: 1.8rem;
      font-weight: bold;
      color: #8a7cff;
      text-align: center;
      text-shadow: 0 0 15px rgba(138, 124, 255, 0.6);
      background: linear-gradient(45deg, #8a7cff, #d66efd, #8a7cff);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s linear infinite;
      font-family: 'Arial Rounded MT Bold', 'Segoe UI', sans-serif;
    }

    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }

    /* Loading */
    .loading {
      text-align: center;
      padding: 4rem;
      font-size: 1.5rem;
      color: #a0a0d0;
    }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-message {
      font-size: 1.8rem;
      color: #e0e0ff;
      margin-bottom: 2rem;
      text-align: center;
      font-weight: 600;
      text-shadow: 0 0 10px rgba(138, 124, 255, 0.5);
    }

    .stars-container {
      position: relative;
      width: 300px;
      height: 300px;
    }

    .star {
      position: absolute;
      background-color: white;
      border-radius: 50%;
      animation: twinkle var(--duration) infinite ease-in-out;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        gap: 1.2rem;
        padding: 1.2rem;
      }

      .profile-header {
        flex-direction: column;
        text-align: center;
      }

      .profile-actions {
        position: static;
        margin-top: 1.5rem;
        text-align: center;
      }

      .footer-content {
        grid-template-columns: 1fr;
      }

      .profile-card, .posts-section {
        padding: 2rem 1.5rem;
      }

      .profile-name {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-message">Wait for a second...</div>
    <div class="stars-container" id="starsContainer"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="logo">GalaxyWeb</div>
    <div class="public-label">Public Profile</div>
  </header>

  <!-- Main Content -->
  <div class="container">
    <div id="profile-content">
      <div class="loading">Loading profile...</div>
    </div>
    <div id="posts-section"></div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-left">
        <div class="footer-about-title">About TeamGalaxy</div>
        <div class="footer-about-text">
          TeamGalaxy is an innovative gaming and creative community, united by passion and the spirit of collaboration. We host tournaments, share design ideas, and grow talents together ‚Äî join now to explore the Galaxy!
        </div>
      </div>
      <div class="footer-right">
        <div class="footer-links">
          <a href="../legal/privacy_policy.html">Privacy Policy</a>
          <a href="../legal/terms_and_conditions.html">Terms & Conditions</a>
          <a href="../about_us.html">About</a>
        </div>
        <div class="rocket-frame">
          <div class="rocket-text">üöÄ ROCKET üöÄ</div>
        </div>
      </div>
    </div>
  </footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
  import { getFirestore, collection, query, where, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";

  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyD0Yv_bQjxi2_kjzPR4XHOlaB7Sb6NRVUc",
    authDomain: "teamgalaxy-77344.firebaseapp.com",
    projectId: "teamgalaxy-77344",
    storageBucket: "teamgalaxy-77344.firebasestorage.app",
    messagingSenderId: "770256225320",
    appId: "1:770256225320:web:5a363ebd757de6cde3a11d",
    measurementId: "G-6C2W9NSNCH"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // DOM Elements
  const loadingOverlay = document.getElementById('loadingOverlay');
  const profileContent = document.getElementById('profile-content');
  const postsSection = document.getElementById('posts-section');

  // Create stars for loading overlay
  function createStars() {
    const container = document.getElementById('starsContainer');
    container.innerHTML = '';
    for (let i = 0; i < 30; i++) {
      const star = document.createElement('div');
      star.classList.add('star');
      const x = Math.random() * 100;
      const y = Math.random() * 100;
      star.style.left = `${x}%`;
      star.style.top = `${y}%`;
      const size = Math.random() * 3 + 1;
      star.style.width = `${size}px`;
      star.style.height = `${size}px`;
      const duration = Math.random() * 3 + 2;
      star.style.setProperty('--duration', `${duration}s`);
      container.appendChild(star);
    }
  }

  // Get UID from URL (supports ?uid=..., ?id=..., ?=UID or ?UID)
  function getUidFromUrl() {
    const params = new URLSearchParams(window.location.search);
    let uid = params.get('uid') || params.get('id') || null;

    if (!uid) {
      const raw = window.location.search.replace(/^\?/, '');
      if (!raw) return null;
      if (raw.startsWith('=')) uid = raw.slice(1);
      else if (raw.includes('=')) uid = raw.split('=')[1];
      else uid = raw;
    }

    if (!uid) return null;
    return decodeURIComponent(uid);
  }

  // Format date
  function formatDate(dateValue) {
    if (!dateValue) return 'Unknown';
    if (dateValue && dateValue.seconds !== undefined) {
      const date = new Date(dateValue.seconds * 1000);
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    } else if (dateValue instanceof Date) {
      return dateValue.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    } else {
      const date = new Date(dateValue);
      if (isNaN(date.getTime())) return 'Unknown';
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    }
  }

  // Format number (e.g., 1000 -> 1K)
  function formatNumber(num) {
    if (!num && num !== 0) return '0';
    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
    return num.toString();
  }

  // Time ago
  function timeAgo(dateValue) {
    if (!dateValue) return 'Just now';
    let date;
    if (dateValue && dateValue.seconds !== undefined) date = new Date(dateValue.seconds * 1000);
    else if (dateValue instanceof Date) date = dateValue;
    else {
      date = new Date(dateValue);
      if (isNaN(date.getTime())) return 'Just now';
    }
    const now = new Date();
    const seconds = Math.floor((now - date) / 1000);
    let interval = seconds / 31536000;
    if (interval > 1) return Math.floor(interval) + ' years ago';
    interval = seconds / 2592000;
    if (interval > 1) return Math.floor(interval) + ' months ago';
    interval = seconds / 86400;
    if (interval > 1) return Math.floor(interval) + ' days ago';
    interval = seconds / 3600;
    if (interval > 1) return Math.floor(interval) + ' hours ago';
    interval = seconds / 60;
    if (interval > 1) return Math.floor(interval) + ' minutes ago';
    return Math.floor(seconds) + ' seconds ago';
  }

  // Load public profile by UID (searches publicProfiles where uid == provided uid)
  async function loadPublicProfile() {
    const uid = getUidFromUrl();
    if (!uid) {
      profileContent.innerHTML = '<div class="loading">Profile UID not found in URL.</div>';
      setTimeout(() => loadingOverlay.classList.add('hidden'), 500);
      return;
    }

    try {
      const q = query(
        collection(db, 'publicProfiles'),
        where('uid', '==', uid),
        limit(1)
      );
      const querySnapshot = await getDocs(q);

      if (querySnapshot.empty) {
        profileContent.innerHTML = '<div class="loading">Profile not found.</div>';
        setTimeout(() => loadingOverlay.classList.add('hidden'), 500);
        return;
      }

      const docSnap = querySnapshot.docs[0];
      const data = docSnap.data();

      // Respect visibility
      if (data.visibility !== true && data.visibility !== 'true') {
        profileContent.innerHTML = '<div class="loading">This profile is not visible to public.</div>';
        setTimeout(() => loadingOverlay.classList.add('hidden'), 500);
        return;
      }

      renderProfile(data, uid);
      await loadUserPostsByUid(uid);
    } catch (error) {
      console.error('Error loading public profile:', error);
      profileContent.innerHTML = '<div class="loading">Error loading profile.</div>';
      setTimeout(() => loadingOverlay.classList.add('hidden'), 500);
    }
  }

  // Load user posts by authorId (authorId == uid)
  async function loadUserPostsByUid(uid) {
    try {
      const q = query(
        collection(db, 'posts'),
        where('authorId', '==', uid),
        orderBy('createdAt', 'desc'),
        limit(3)
      );
      const querySnapshot = await getDocs(q);

      const posts = [];
      querySnapshot.forEach(doc => {
        posts.push({ id: doc.id, ...doc.data() });
      });

      await renderPosts(posts);
    } catch (error) {
      console.error('Error loading posts:', error);
      postsSection.innerHTML = '<div class="loading">Error loading posts.</div>';
    } finally {
      setTimeout(() => loadingOverlay.classList.add('hidden'), 2000);
    }
  }

  // Render profile HTML; display slug (if present) but keep uid as canonical id for sharing/routing
  function renderProfile(data, uid) {
    const displayHandle = data.slug ? '@' + data.slug : (uid ? uid : 'Unknown');

    profileContent.innerHTML = `
      <div class="profile-card">
        <div class="profile-actions">
          <button class="btn-share" id="shareBtn">Share Profile</button>
        </div>
        
        <!-- Profile Header -->
        <div class="profile-header">
          <img src="${data.profilePhotoUrl || 'https://via.placeholder.com/150'}" alt="Profile Photo" class="profile-photo">
          <div class="profile-info">
            <h1 class="profile-name">${data.name || 'Unknown User'}</h1>
            <div class="profile-handle">${displayHandle}${data.verified ? ' <span class="verified-badge">‚úì Verified</span>' : ''}</div>
            <div class="join-date">Joined: ${formatDate(data.joinDate)}</div>
          </div>
        </div>

        <!-- Bio Section -->
        <div class="bio-section">
          <h2 class="section-title">Bio</h2>
          <p class="bio-text">${data.bio || 'No bio available.'}</p>
        </div>

        <!-- Stats Section -->
        <div class="profile-stats">
          <div class="stat-card">
            <div class="stat-value">${formatNumber(data.publicPostCount || 0)}</div>
            <div class="stat-label">Public Posts</div>
          </div>
        </div>
      </div>
    `;

    // Share button uses UID in URL (routing stable)
    document.getElementById('shareBtn').addEventListener('click', async () => {
      try {
        const shareUrl = `${window.location.origin}/public_profile?=${encodeURIComponent(uid)}`;
        if (navigator.share) {
          await navigator.share({ title: `${data.name || 'Profile'}`, url: shareUrl });
        } else if (navigator.clipboard) {
          await navigator.clipboard.writeText(shareUrl);
          alert('Profile URL copied to clipboard!');
        } else {
          prompt('Copy profile URL:', shareUrl);
        }
      } catch (err) {
        console.error('Failed to share/copy: ', err);
        alert('Failed to share profile. Try copying manually: ' + `${window.location.origin}/public_profile?=${encodeURIComponent(uid)}`);
      }
    });
  }

  // Render posts HTML
  async function renderPosts(posts) {
    if (!posts || posts.length === 0) {
      postsSection.innerHTML = '<div class="loading">No posts found.</div>';
      return;
    }

    let postsHTML = `
      <div class="posts-section">
        <h2 class="section-title">Recent Posts</h2>
        <div class="posts-grid">
    `;

    for (const post of posts) {
      let comments = [];
      try {
        const commentsQuery = query(
          collection(db, 'posts', post.id, 'comments'),
          orderBy('createdAt', 'desc'),
          limit(3)
        );
        const commentsSnapshot = await getDocs(commentsQuery);
        commentsSnapshot.forEach(doc => comments.push({ id: doc.id, ...doc.data() }));
      } catch (e) {
        console.warn('comments fetch failed for post', post.id, e);
      }

      postsHTML += `
        <div class="post-card">
          <h3 class="post-title">${post.title || 'Untitled Post'}</h3>
          <p class="post-body">${post.body || 'No content available.'}</p>
          <div class="post-meta">
            <span class="post-author">By ${post.authorName || 'Anonymous'}</span>
            <span class="post-time">${timeAgo(post.createdAt)}</span>
          </div>
          <div class="post-meta">
            <span>üëç ${formatNumber(post.upvotesCount || 0)}</span>
            <span>üëé ${formatNumber(post.downvotesCount || 0)}</span>
            <span>üí¨ ${formatNumber(post.commentsCount || 0)}</span>
          </div>

          ${comments.length > 0 ? `
            <div class="comments-section">
              <h4>Recent Comments</h4>
              <div class="comments-grid">
                ${comments.map(comment => `
                  <div class="comment-card">
                    <div class="comment-header">
                      <span class="comment-author">${comment.authorName || 'Anonymous'}</span>
                      <span class="comment-time">${timeAgo(comment.createdAt)}</span>
                    </div>
                    <p class="comment-body">${comment.body || ''}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          ` : ''}
        </div>
      `;
    }

    postsHTML += `
        </div>
        <div class="post-actions">
          <button class="btn-post" id="explore-btn">Explore</button>
          <button class="btn-post" id="show-all-btn">Show All Posts</button>
        </div>
      </div>
    `;

    postsSection.innerHTML = postsHTML;

    document.getElementById('explore-btn').addEventListener('click', () => {
      window.location.href = '../posts.html';
    });

    document.getElementById('show-all-btn').addEventListener('click', () => {
      const uid = getUidFromUrl();
      if (uid) {
        window.location.href = `public_user_posts.html?=${encodeURIComponent(uid)}`;
      } else {
        window.location.href = 'public_user_posts.html';
      }
    });
  }

  // Load profile when page loads
  window.addEventListener('load', () => {
    createStars();
    loadPublicProfile();
  });
</script>
</body>
</html>
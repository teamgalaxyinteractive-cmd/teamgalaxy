<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TeamGalaxy Admin | Agreement Access</title>
  <style>
    :root {
      --galaxy-purple: #9333ea;
      --galaxy-pink: #ec4899;
      --galaxy-blue: #3b82f6;
      --dark-bg: #0a0a15;
      --card-bg: #141428;
      --border-glow: rgba(147, 51, 234, 0.4);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, var(--dark-bg) 0%, #1a1a2e 100%);
      color: #e2e8f0;
      min-height: 100vh;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 20%);
      z-index: -1;
      pointer-events: none;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
      padding: 20px 0;
    }
    
    .header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 70%;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--galaxy-purple), transparent);
    }
    
    .header h1 {
      font-size: 2.8rem;
      background: linear-gradient(90deg, #c084fc, #f472b6, #60a5fa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 15px rgba(192, 132, 252, 0.3);
      margin-bottom: 15px;
    }
    
    .header p {
      color: #94a3b8;
      max-width: 700px;
      margin: 0 auto;
      font-size: 1.1rem;
      line-height: 1.6;
    }
    
    .agreement-card {
      background: var(--card-bg);
      border-radius: 22px;
      overflow: hidden;
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(147, 51, 234, 0.15);
      margin-bottom: 30px;
      border: 1px solid var(--border-glow);
      position: relative;
    }
    
    .agreement-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, 
        rgba(147, 51, 234, 0.05),
        rgba(236, 72, 153, 0.05)
      );
      z-index: -1;
    }
    
    .card-header {
      padding: 25px 40px;
      background: rgba(26, 26, 46, 0.8);
      border-bottom: 1px solid var(--border-glow);
      display: flex;
      align-items: center;
      gap: 20px;
    }
    
    .shield-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--galaxy-purple), var(--galaxy-pink));
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      flex-shrink: 0;
    }
    
    .card-header-content h2 {
      font-size: 1.9rem;
      margin-bottom: 5px;
      background: linear-gradient(90deg, #c084fc, #f472b6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .card-header-content p {
      color: #a5b4fc;
      font-weight: 500;
    }
    
    .card-body {
      padding: 30px 40px;
    }
    
    .agreement-warning {
      background: rgba(127, 29, 29, 0.3);
      border: 1px solid rgba(239, 68, 68, 0.4);
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .agreement-warning::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, #ef4444, #f97316);
    }
    
    .warning-title {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      color: #fca5a5;
      font-weight: 600;
      font-size: 1.3rem;
    }
    
    .warning-title::before {
      content: '!';
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: #ef4444;
      border-radius: 50%;
      margin-right: 12px;
      font-weight: bold;
    }
    
    .warning-content {
      color: #f9a8d4;
      line-height: 1.7;
      font-size: 1.05rem;
    }
    
    .warning-content strong {
      color: #fca5a5;
    }
    
    .admins-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    
    .table-header {
      background: rgba(30, 30, 50, 0.7);
      color: #c084fc;
      font-weight: 600;
    }
    
    .admins-table th,
    .admins-table td {
      padding: 16px 20px;
      text-align: left;
      border-bottom: 1px solid rgba(147, 51, 234, 0.2);
    }
    
    .admins-table tr:hover {
      background: rgba(45, 45, 75, 0.4);
    }
    
    .admin-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--galaxy-purple);
      margin-right: 12px;
      background: #1e1e30;
    }
    
    .admin-name {
      display: flex;
      align-items: center;
      font-weight: 500;
    }
    
    .status-badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-weight: 500;
      display: inline-block;
      font-size: 0.85rem;
    }
    
    .status-verified {
      background: rgba(34, 197, 94, 0.2);
      color: #34d399;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }
    
    .status-unverified {
      background: rgba(234, 179, 8, 0.2);
      color: #fbbf24;
      border: 1px solid rgba(234, 179, 8, 0.3);
    }
    
    .action-section {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    
    .action-btn {
      padding: 14px 35px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      border: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--galaxy-purple), var(--galaxy-pink));
      color: white;
      box-shadow: 0 5px 15px rgba(147, 51, 234, 0.4);
    }
    
    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(147, 51, 234, 0.6);
    }
    
    .btn-secondary {
      background: rgba(30, 30, 50, 0.8);
      color: #a5b4fc;
      border: 1px solid var(--border-glow);
    }
    
    .btn-secondary:hover {
      background: rgba(45, 45, 75, 0.8);
    }
    
    .footer {
      text-align: center;
      padding: 25px 0;
      color: #94a3b8;
      font-size: 0.95rem;
      margin-top: 20px;
      border-top: 1px dashed rgba(147, 51, 234, 0.3);
    }
    
    .footer-note {
      color: #c084fc;
      font-weight: 500;
      margin-top: 8px;
    }
    
    /* Modal styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      pointer-events: all;
    }
    
    .agreement-modal {
      background: var(--card-bg);
      border-radius: 24px;
      width: 90%;
      max-width: 900px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
      border: 1px solid var(--border-glow);
      position: relative;
      transform: translateY(20px);
      transition: transform 0.4s ease;
    }
    
    .modal-overlay.active .agreement-modal {
      transform: translateY(0);
    }
    
    .modal-header {
      padding: 25px 30px;
      border-bottom: 1px solid var(--border-glow);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-header h3 {
      font-size: 1.8rem;
      background: linear-gradient(90deg, var(--galaxy-purple), var(--galaxy-pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .close-modal {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .close-modal:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: rotate(90deg);
    }
    
    .modal-content {
      padding: 30px;
      line-height: 1.8;
      color: #e2e8f0;
      font-size: 1.05rem;
    }
    
    .modal-content h4 {
      color: #c084fc;
      margin: 20px 0 15px;
      font-size: 1.4rem;
    }
    
    .modal-content p {
      margin-bottom: 15px;
    }
    
    .modal-content strong {
      color: #fca5a5;
    }
    
    .modal-footer {
      padding: 20px 30px;
      border-top: 1px solid rgba(147, 51, 234, 0.3);
      text-align: right;
    }
    
    .accept-btn {
      background: linear-gradient(135deg, #10b981, #0ea5e9);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 14px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    }
    
    .accept-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6);
    }
    
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(147, 51, 234, 0.3);
      border-radius: 50%;
      border-top-color: var(--galaxy-purple);
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .error-message {
      color: #f87171;
      text-align: center;
      padding: 20px;
      font-weight: 500;
    }
    
    .retry-btn {
      background: rgba(220, 38, 38, 0.2);
      color: #fca5a5;
      border: 1px solid rgba(220, 38, 38, 0.4);
      padding: 8px 16px;
      border-radius: 12px;
      margin-top: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .retry-btn:hover {
      background: rgba(220, 38, 38, 0.3);
    }
    
    .success-message {
      color: #34d399;
      text-align: center;
      padding: 20px;
      font-weight: 500;
      background: rgba(16, 185, 129, 0.1);
      border-radius: 12px;
      margin: 15px 0;
      border-left: 3px solid #10b981;
    }
    
    @media (max-width: 768px) {
      .card-header {
        flex-direction: column;
        text-align: center;
      }
      
      .card-body {
        padding: 25px;
      }
      
      .action-section {
        flex-direction: column;
        align-items: center;
      }
      
      .action-btn {
        width: 100%;
        max-width: 320px;
      }
      
      .header h1 {
        font-size: 2.2rem;
      }
      
      .agreement-modal {
        width: 95%;
        margin: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Galaxy Admin Agreement Hub</h1>
      <p>Official access point for compliance documentation and administrative accountability verification</p>
    </div>

    <div class="agreement-card">
      <div class="card-header">
        <div class="shield-icon">üõ°Ô∏è</div>
        <div class="card-header-content">
          <h2>Administrative Agreement System</h2>
          <p>Version 3.1 ‚Ä¢ Last Updated: November 15, 2025</p>
        </div>
      </div>
      
      <div class="card-body">
        <div class="agreement-warning">
          <div class="warning-title">Personal Accountability Notice</div>
          <div class="warning-content">
            <p><strong>All administrative actions performed within this system are the sole responsibility of the authenticated administrator.</strong> 
            TeamGalaxy Technologies disclaims all liability for misuse, data breaches, or policy violations resulting from 
            administrator actions. By maintaining access privileges, you accept full accountability for:</p>
            <ul style="padding-left: 25px; margin-top: 12px; line-height: 1.8;">
              <li>Compliance with data protection regulations (India IT Act, GDPR)</li>
              <li>Security of assigned credentials and session management</li>
              <li>Accuracy of system configurations and user permissions</li>
              <li>Reporting of suspicious activities within 24 hours</li>
            </ul>
            <p style="margin-top: 15px; font-style: italic;">
              Violations may result in immediate access revocation, legal proceedings, and financial liability as per 
              <span class="text-blue-300">Section 4.7 of the Master Agreement</span>.
            </p>
          </div>
        </div>

        <h3 style="font-size: 1.6rem; margin: 25px 0 20px; color: #c084fc;">Current Administrators & Agreement Status</h3>
        
        <div style="overflow-x: auto; border-radius: 16px; border: 1px solid rgba(147, 51, 234, 0.2);">
          <table class="admins-table">
            <thead class="table-header">
              <tr>
                <th>Administrator</th>
                <th>Email</th>
                <th>Verified</th>
                <th>Authorised By</th>
                <th>Agreement Status</th>
              </tr>
            </thead>
            <tbody id="admins-table-body">
              <tr>
                <td colspan="5" style="text-align: center; padding: 30px; color: #94a3b8;">
                  <div class="loading-spinner"></div>
                  Loading administrator data...
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="action-section">
          <button id="review-agreement-btn" class="action-btn btn-primary">
            üìù Review Master Agreement
          </button>
          <button id="request-docs-btn" class="action-btn btn-secondary">
            üîê Request Full Documentation
          </button>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>TeamGalaxy Administrative Systems ‚Ä¢ Internal Use Only ‚Ä¢ Confidential</p>
      <p class="footer-note">‚ö†Ô∏è Unauthorized access or distribution violates Section 12 of Administrative Policy</p>
      <p style="margin-top: 8px; color: #7e8ea0; font-size: 0.9rem;">
        All administrators acknowledge personal liability for actions performed under their credentials. 
        TeamGalaxy Technologies reserves right to audit compliance without prior notice.
      </p>
    </div>
  </div>

  <!-- Agreement Modal -->
  <div class="modal-overlay" id="agreement-modal">
    <div class="agreement-modal">
      <div class="modal-header">
        <h3>TeamGalaxy Master Administrative Agreement</h3>
        <div class="close-modal" id="close-modal">‚úï</div>
      </div>
      <div class="modal-content">
        <p><strong>EFFECTIVE DATE:</strong> November 15, 2025</p>
        <p><strong>PARTIES:</strong> TeamGalaxy Technologies (System Owner) and Authenticated Administrator</p>
        
        <h4>1. PERSONAL LIABILITY</h4>
        <p>The Administrator acknowledges and accepts <strong>sole responsibility</strong> for all actions performed using their authenticated credentials. This includes but is not limited to:</p>
        <ul style="padding-left: 25px; margin: 15px 0;">
          <li>Data access, modification, or deletion operations</li>
          <li>User permission management and role assignments</li>
          <li>Configuration changes to system parameters</li>
          <li>Security protocol adherence and incident reporting</li>
        </ul>
        
        <h4>2. COMPLIANCE OBLIGATIONS</h4>
        <p>Administrator warrants compliance with:</p>
        <ul style="padding-left: 25px; margin: 15px 0;">
          <li>India Information Technology Act, 2000 (as amended)</li>
          <li>Relevant data protection regulations including GDPR where applicable</li>
          <li>Internal TeamGalaxy security policies and procedures</li>
        </ul>
        <p><strong>Failure to comply constitutes immediate grounds for access revocation and legal action.</strong></p>
        
        <h4>3. AUDIT RIGHTS</h4>
        <p>TeamGalaxy Technologies reserves the right to:</p>
        <ul style="padding-left: 25px; margin: 15px 0;">
          <li>Conduct unannounced security and compliance audits</li>
          <li>Review all administrator actions and access logs</li>
          <li>Revoke access privileges without prior notice for policy violations</li>
        </ul>
        
        <h4>4. INDEMNIFICATION</h4>
        <p>The Administrator agrees to <strong>indemnify and hold harmless</strong> TeamGalaxy Technologies, its officers, and affiliates from any claims, damages, or liabilities arising from:</p>
        <ul style="padding-left: 25px; margin: 15px 0;">
          <li>Unauthorized data access or disclosure</li>
          <li>Misuse of administrative privileges</li>
          <li>Failure to report security incidents within mandated timeframes</li>
        </ul>
        
        <h4>5. AGREEMENT ACKNOWLEDGEMENT</h4>
        <p>Continued access to administrative systems constitutes acceptance of these terms. This agreement supersedes all prior understandings and may be modified by TeamGalaxy Technologies with written notice.</p>
      </div>
      <div class="modal-footer">
        <button class="accept-btn" id="accept-agreement-btn">
          I Accept Full Responsibility
        </button>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    // Import Firebase modules
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
    import { 
      getFirestore, 
      collection, 
      getDocs, 
      doc, 
      updateDoc 
    } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore.js";
    import { 
      getAuth, 
      onAuthStateChanged 
    } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-auth.js";

    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyD0Yv_bQjxi2_kjzPR4XHOlaB7Sb6NRVUc",
      authDomain: "teamgalaxy-77344.firebaseapp.com",
      projectId: "teamgalaxy-77344",
      storageBucket: "teamgalaxy-77344.firebasestorage.app",
      messagingSenderId: "770256225320",
      appId: "1:770256225320:web:5a363ebd757de6cde3a11d",
      measurementId: "G-6C2W9NSNCH"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    // DOM Elements
    const adminsTableBody = document.getElementById('admins-table-body');
    const reviewAgreementBtn = document.getElementById('review-agreement-btn');
    const closeModalBtn = document.getElementById('close-modal');
    const acceptAgreementBtn = document.getElementById('accept-agreement-btn');
    const agreementModal = document.getElementById('agreement-modal');
    const requestDocsBtn = document.getElementById('request-docs-btn');

    let currentUser = null;
    let currentAdminDocId = null;

    // Check authentication state
    onAuthStateChanged(auth, (user) => {
      if (user) {
        currentUser = user;
        loadAdmins();
      } else {
        showAuthError();
      }
    });

    // Load admins from Firestore
    async function loadAdmins() {
      try {
        adminsTableBody.innerHTML = `
          <tr>
            <td colspan="5" style="text-align: center; padding: 30px; color: #94a3b8;">
              <div class="loading-spinner"></div>
              Loading administrator data...
            </td>
          </tr>
        `;

        const querySnapshot = await getDocs(collection(db, "admin"));
        
        // Find current user's admin document
        querySnapshot.forEach((doc) => {
          const admin = doc.data();
          if (admin.gmail === currentUser.email) {
            currentAdminDocId = doc.id;
          }
        });

        if (querySnapshot.empty) {
          adminsTableBody.innerHTML = `
            <tr>
              <td colspan="5" style="text-align: center; padding: 30px; color: #f87171;">
                No administrators found in the system
              </td>
            </tr>
          `;
          return;
        }

        let rows = '';
        querySnapshot.forEach((doc) => {
          const admin = doc.data();
          const avatar = admin.photoUrl || `https://ui-avatars.com/api/?name=${encodeURIComponent(admin.name || 'Admin')}&background=9333ea&color=fff`;
          const verifiedStatus = admin.verified ? 
            `<span class="status-badge status-verified">Verified</span>` : 
            `<span class="status-badge status-unverified">Pending</span>`;
          
          // Check agreement status
          const hasAccepted = admin.agreementAccepted && admin.agreementVersion === '3.1';
          const agreementStatus = hasAccepted ? 
            `<span class="status-badge status-verified">Accepted v3.1</span>` : 
            `<span class="status-badge status-unverified">Requires Acceptance</span>`;
          
          rows += `
            <tr>
              <td>
                <div class="admin-name">
                  <img src="${avatar}" class="admin-avatar" alt="${admin.name || 'Admin'}">
                  ${admin.name || 'Unnamed Admin'}
                </div>
              </td>
              <td>${admin.gmail || 'No email'}</td>
              <td>${verifiedStatus}</td>
              <td>${admin.authorisedBy || 'System'}</td>
              <td>${agreementStatus}</td>
            </tr>
          `;
        });
        
        adminsTableBody.innerHTML = rows;
      } catch (error) {
        console.error("Error loading admins:", error);
        adminsTableBody.innerHTML = `
          <tr>
            <td colspan="5" style="text-align: center; padding: 30px;">
              <div class="error-message">
                Failed to load administrator data
              </div>
              <button class="retry-btn" id="retry-load-btn">
                üîÑ Retry Loading
              </button>
            </td>
          </tr>
        `;
        
        // Add retry button handler
        document.getElementById('retry-load-btn')?.addEventListener('click', loadAdmins);
      }
    }

    // Handle agreement acceptance
    async function acceptAgreement() {
      if (!currentAdminDocId) {
        alert('‚ùå Unable to find your admin record. Please contact your system administrator.');
        return;
      }

      try {
        const adminRef = doc(db, "admin", currentAdminDocId);
        await updateDoc(adminRef, {
          agreementAccepted: new Date(),
          agreementVersion: "3.1",
          lastUpdated: new Date()
        });

        // Show success message
        adminsTableBody.innerHTML = `
          <tr>
            <td colspan="5" class="success-message">
              ‚úÖ Agreement accepted successfully! Your acceptance has been recorded with timestamp: ${new Date().toLocaleString()}
            </td>
          </tr>
        `;
        
        // Refresh table after 2 seconds
        setTimeout(loadAdmins, 2000);
        
        // Close modal
        agreementModal.classList.remove('active');
        document.body.style.overflow = 'auto';
        
      } catch (error) {
        console.error("Error updating agreement status:", error);
        alert('‚ùå Failed to record agreement acceptance. Please try again or contact support.');
      }
    }

    // Show authentication error
    function showAuthError() {
      adminsTableBody.innerHTML = `
        <tr>
          <td colspan="5" style="text-align: center; padding: 40px; color: #f87171;">
            <div style="font-size: 1.2rem; margin-bottom: 15px;">üîí Authentication Required</div>
            <p style="color: #94a3b8; margin-bottom: 20px;">
              Please log in to view administrator agreements and compliance documentation.
            </p>
            <button class="retry-btn" onclick="window.location.href='/'" style="background: var(--galaxy-purple); color: white; border: none; padding: 10px 25px;">
              ‚Üê Return to Login
            </button>
          </td>
        </tr>
      `;
    }

    // Modal functionality
    reviewAgreementBtn.addEventListener('click', () => {
      if (!currentUser) {
        alert('üîí Please log in first to review the agreement.');
        return;
      }
      agreementModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    });

    closeModalBtn.addEventListener('click', () => {
      agreementModal.classList.remove('active');
      document.body.style.overflow = 'auto';
    });

    acceptAgreementBtn.addEventListener('click', acceptAgreement);

    // Close modal when clicking outside
    agreementModal.addEventListener('click', (e) => {
      if (e.target === agreementModal) {
        agreementModal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    });

    // Updated documentation request handler (NO 24-HOUR PROMISE)
    requestDocsBtn.addEventListener('click', () => {
      alert('üì© Documentation request initiated!\n\nFor full compliance documentation and legal agreements, please contact:\n\n‚Ä¢ Your system administrator directly\n‚Ä¢ TeamGalaxy developer team via official support channels\n\nNo automated response will be provided.');
    });

    // Handle data loading errors
    window.addEventListener('error', (e) => {
      if (e.message.includes('FirebaseError')) {
        adminsTableBody.innerHTML = `
          <tr>
            <td colspan="5" style="text-align: center; padding: 40px; color: #f87171;">
              <div style="font-size: 1.2rem; margin-bottom: 15px;">üö® System Connection Error</div>
              <p style="color: #94a3b8; margin-bottom: 20px;">
                Unable to connect to TeamGalaxy administrative database. 
                Please check your internet connection and permissions.
              </p>
              <button class="retry-btn" id="system-retry-btn">
                üîÑ Retry Connection
              </button>
            </td>
          </tr>
        `;
        
        document.getElementById('system-retry-btn')?.addEventListener('click', () => {
          location.reload();
        });
      }
    });
  </script>
</body>
</html>
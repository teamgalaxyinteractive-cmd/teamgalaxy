<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile - TeamGalaxy</title>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js  "></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js  "></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js  "></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #e0e0ff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background: rgba(10, 10, 35, 0.95);
      backdrop-filter: blur(15px);
      border-bottom: 1px solid #5a4fcf;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      font-size: 2rem;
      font-weight: bold;
      color: #8a7cff;
      letter-spacing: 1.5px;
      text-shadow: 0 0 10px rgba(138, 124, 255, 0.5);
      background: linear-gradient(45deg, #8a7cff, #d66efd);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .header-buttons {
      display: flex;
      gap: 1rem;
    }

    .btn {
      padding: 0.7rem 1.4rem;
      border-radius: 8px;
      border: 1px solid rgba(138, 124, 255, 0.3);
      background: rgba(20, 20, 40, 0.5);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      color: #b1a6ff;
      backdrop-filter: blur(10px);
    }

    .btn:hover {
      background: rgba(30, 30, 60, 0.7);
      border: 1px solid rgba(138, 124, 255, 0.6);
      box-shadow: 0 0 15px rgba(138, 124, 255, 0.2);
    }

    /* Main Content */
    .container {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1.5rem;
      flex: 1;
    }

    .profile-card {
      background: rgba(20, 20, 40, 0.85);
      border-radius: 20px;
      padding: 3rem;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      border: 1px solid #5a4fcf;
      backdrop-filter: blur(10px);
      margin-bottom: 2rem;
      width: 100%;
      position: relative;
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 2rem;
      margin-bottom: 2.5rem;
      flex-wrap: wrap;
    }

    .profile-photo {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #6a5af9;
      background: linear-gradient(45deg, #6a5af9, #d66efd);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      box-shadow: 0 0 20px rgba(106, 90, 249, 0.3);
    }

    .profile-info {
      flex: 1;
      min-width: 300px;
    }

    .profile-name {
      font-size: 2.5rem;
      font-weight: bold;
      color: #ffffff;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    }

    .profile-slug {
      font-size: 1.3rem;
      color: #b1a6ff;
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .verified-badge {
      display: inline-block;
      background: linear-gradient(45deg, #6a5af9, #d66efd);
      color: white;
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 0 10px rgba(106, 90, 249, 0.3);
    }

    .join-date, .email {
      color: #a0a0d0;
      font-size: 1.1rem;
      margin: 0.3rem 0;
    }

    .profile-actions {
      position: absolute;
      top: 2rem;
      right: 2rem;
    }

    .btn-share {
      padding: 0.7rem 1.4rem;
      border-radius: 8px;
      border: 1px solid rgba(138, 124, 255, 0.3);
      background: rgba(20, 20, 40, 0.5);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      color: #b1a6ff;
      backdrop-filter: blur(10px);
    }

    .btn-share:hover {
      background: rgba(30, 30, 60, 0.7);
      border: 1px solid rgba(138, 124, 255, 0.6);
      box-shadow: 0 0 15px rgba(138, 124, 255, 0.2);
    }

    .bio-section {
      margin: 2.5rem 0;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #d0c4ff;
      margin-bottom: 1.5rem;
      padding-bottom: 0.8rem;
      border-bottom: 2px solid #5a4fcf;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .bio-text {
      line-height: 1.7;
      color: #c0c0e0;
      font-size: 1.15rem;
    }

    .profile-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2.5rem;
    }

    .stat-card {
      background: rgba(40, 40, 70, 0.6);
      padding: 2rem;
      border-radius: 15px;
      text-align: center;
      border: 1px solid #5a4fcf;
      transition: transform 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-value {
      font-size: 2.5rem;
      font-weight: bold;
      color: #8a7cff;
      margin-bottom: 0.8rem;
      text-shadow: 0 0 10px rgba(138, 124, 255, 0.3);
    }

    .stat-label {
      color: #b1a6ff;
      font-size: 1.1rem;
    }

    /* Posts Section */
    .posts-section {
      background: rgba(20, 20, 40, 0.85);
      border-radius: 20px;
      padding: 3rem;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      border: 1px solid #5a4fcf;
      backdrop-filter: blur(10px);
      margin-bottom: 2rem;
    }

    /* CHANGED: Single column for posts */
    .posts-grid {
      display: grid;
      grid-template-columns: 1fr; /* Single column */
      gap: 2rem;
      margin-top: 2rem;
    }

    .post-card {
      background: rgba(30, 30, 50, 0.7);
      border-radius: 15px;
      padding: 1.8rem;
      border: 1px solid #5a4fcf;
      transition: transform 0.3s ease;
    }

    .post-card:hover {
      transform: translateY(-5px);
      border-color: #8a7cff;
    }

    .post-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 0.8rem;
    }

    .post-body {
      color: #c0c0e0;
      line-height: 1.6;
      margin-bottom: 1.2rem;
      font-size: 1rem;
    }

    .post-meta {
      display: flex;
      justify-content: space-between;
      color: #a0a0d0;
      font-size: 0.9rem;
      border-top: 1px solid #4a4a8a;
      padding-top: 1rem;
    }

    .post-author {
      color: #8a7cff;
    }

    .post-time {
      color: #8a7cff;
      font-size: 0.85rem;
      font-style: italic;
    }

    .comments-section {
      margin-top: 2.5rem;
    }

    /* CHANGED: Single column for comments */
    .comments-grid {
      display: grid;
      grid-template-columns: 1fr; /* Single column */
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .comment-card {
      background: rgba(40, 40, 60, 0.6);
      border-radius: 12px;
      padding: 1.2rem;
      border: 1px solid #4a4a8a;
      display: flex;
      flex-direction: column;
    }

    .comment-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.8rem;
    }

    .comment-author {
      font-weight: 600;
      color: #8a7cff;
    }

    .comment-time {
      font-size: 0.8rem;
      color: #a0a0d0;
      font-style: italic;
    }

    .comment-body {
      color: #c0c0e0;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .post-actions {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      justify-content: center;
    }

    .btn-post {
      padding: 0.9rem 2rem;
      border-radius: 8px;
      border: 1px solid rgba(138, 124, 255, 0.3);
      background: rgba(20, 20, 40, 0.5);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 1rem;
      color: #b1a6ff;
      backdrop-filter: blur(10px);
    }

    .btn-post:hover {
      background: rgba(30, 30, 60, 0.7);
      border: 1px solid rgba(138, 124, 255, 0.6);
      box-shadow: 0 0 15px rgba(138, 124, 255, 0.2);
    }

    /* Footer */
    .footer {
      background: rgba(10, 10, 35, 0.95);
      padding: 3rem 2rem 2rem;
      margin-top: 3rem;
      border-top: 1px solid #5a4fcf;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
    }

    .footer-about-title {
      font-size: 1.1rem;
      color: #8a7cff;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .footer-about-text {
      color: #a0a0d0;
      line-height: 1.6;
      font-size: 0.90rem;
    }

    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .footer-links a {
      color: #a0a0d0;
      text-decoration: none;
      font-size: 0.95rem;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: #8a7cff;
      text-decoration: underline;
    }

    .rocket-frame {
      margin-top: 2rem;
      padding: 1.5rem;
      border: 2px solid #5a4fcf;
      border-radius: 12px;
      background: rgba(20, 20, 40, 0.5);
      position: relative;
      overflow: hidden;
    }

    .rocket-text {
      font-size: 1.8rem;
      font-weight: bold;
      color: #8a7cff;
      text-align: center;
      text-shadow: 0 0 15px rgba(138, 124, 255, 0.6);
      background: linear-gradient(45deg, #8a7cff, #d66efd, #8a7cff);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s linear infinite;
      font-family: 'Arial Rounded MT Bold', 'Segoe UI', sans-serif;
    }

    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-message {
      font-size: 1.8rem;
      color: #e0e0ff;
      margin-bottom: 2rem;
      text-align: center;
      font-weight: 600;
      text-shadow: 0 0 10px rgba(138, 124, 255, 0.5);
    }

    .stars-container {
      position: relative;
      width: 300px;
      height: 300px;
    }

    .star {
      position: absolute;
      background-color: white;
      border-radius: 50%;
      animation: twinkle var(--duration) infinite ease-in-out;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        gap: 1.2rem;
        padding: 1.2rem;
      }

      .profile-header {
        flex-direction: column;
        text-align: center;
      }

      .profile-actions {
        position: static;
        margin-top: 1.5rem;
        text-align: center;
      }

      .footer-content {
        grid-template-columns: 1fr;
      }

      .profile-card, .posts-section {
        padding: 2rem 1.5rem;
      }

      .profile-name {
        font-size: 2rem;
      }
    }
  </style>
</head><body>
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-message">Building your profile, wait for a second...</div>
    <div class="stars-container" id="starsContainer"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="logo">GalaxyWeb</div>
    <div class="header-buttons">
      <button class="btn btn-settings">Settings</button>
      <button class="btn btn-logout">Log Out</button>
    </div>
  </header>

  <!-- Main Content -->
  <div class="container">
    <div id="profile-content">
      <div class="loading">Loading profile...</div>
    </div>
    <div id="posts-section"></div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-left">
        <div class="footer-about-title">About TeamGalaxy</div>
        <div class="footer-about-text">
          TeamGalaxy is an innovative gaming and creative community, united by passion and the spirit of collaboration. We host tournaments, share design ideas, and grow talents together ‚Äî join now to explore the Galaxy!
        </div>
      </div>
      <div class="footer-right">
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms & Conditions</a>
          <a href="#">About</a>
        </div>
        <div class="rocket-frame">
          <div class="rocket-text">üöÄ ROCKET üöÄ</div>
        </div>
      </div>
    </div>
  </footer>
  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyD0Yv_bQjxi2_kjzPR4XHOlaB7Sb6NRVUc",
      authDomain: "teamgalaxy-77344.firebaseapp.com",
      projectId: "teamgalaxy-77344",
      storageBucket: "teamgalaxy-77344.firebasestorage.app",
      messagingSenderId: "770256225320",
      appId: "1:770256225320:web:5a363ebd757de6cde3a11d",
      measurementId: "G-6C2W9NSNCH"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // DOM Elements
    const loadingOverlay = document.getElementById('loadingOverlay');
    const profileContent = document.getElementById('profile-content');
    const postsSection = document.getElementById('posts-section');
    const logoutBtn = document.querySelector('.btn-logout');
    const settingsBtn = document.querySelector('.btn-settings');

    // Create stars for loading overlay
    function createStars() {
      const container = document.getElementById('starsContainer');
      container.innerHTML = '';
      for (let i = 0; i < 30; i++) {
        const star = document.createElement('div');
        star.classList.add('star');

        // Random position
        const x = Math.random() * 100;
        const y = Math.random() * 100;
        star.style.left = `${x}%`;
        star.style.top = `${y}%`;

        // Random size
        const size = Math.random() * 3 + 1;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;

        // Random animation duration
        const duration = Math.random() * 3 + 2;
        star.style.setProperty('--duration', `${duration}s`);

        container.appendChild(star);
      }
    }

    // Format date - FIXED
    function formatDate(dateValue) {
      if (!dateValue) return '';

      // Check if it's a Firestore Timestamp object
      if (dateValue && dateValue.seconds) {
        const date = new Date(dateValue.seconds * 1000);
        return date.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
      }
      // If it's already a Date object
      else if (dateValue instanceof Date) {
        return dateValue.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
      }
      // If it's a string or number
      else {
        const date = new Date(dateValue);
        if (isNaN(date.getTime())) {
          return 'Invalid Date';
        }
        return date.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
      }
    }

    // Format number (e.g., 1000 -> 1K)
    function formatNumber(num) {
      if (num >= 1000000) {
        return (num / 1000000).toFixed(1) + 'M';
      }
      if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'K';
      }
      return num.toString();
    }

    // Time ago function - FIXED
    function timeAgo(dateValue) {
      if (!dateValue) return 'Just now';

      let date;
      // Check if it's a Firestore Timestamp object
      if (dateValue && dateValue.seconds) {
        date = new Date(dateValue.seconds * 1000);
      }
      // If it's already a Date object
      else if (dateValue instanceof Date) {
        date = dateValue;
      }
      // If it's a string or number
      else {
        date = new Date(dateValue);
        if (isNaN(date.getTime())) {
          return 'Invalid Date';
        }
      }

      const now = new Date();
      const seconds = Math.floor((now - date) / 1000);

      let interval = seconds / 31536000;
      if (interval > 1) return Math.floor(interval) + ' years ago';
      interval = seconds / 2592000;
      if (interval > 1) return Math.floor(interval) + ' months ago';
      interval = seconds / 86400;
      if (interval > 1) return Math.floor(interval) + ' days ago';
      interval = seconds / 3600;
      if (interval > 1) return Math.floor(interval) + ' hours ago';
      interval = seconds / 60;
      if (interval > 1) return Math.floor(interval) + ' minutes ago';
      return Math.floor(seconds) + ' seconds ago';
    }

    // Load profile data
    async function loadProfile() {
      const user = auth.currentUser;
      if (!user) {
        profileContent.innerHTML = '<div class="loading">Please log in to view your profile.</div>';
        return;
      }

      try {
        const docRef = db.collection('usersPrivate').doc(user.uid);
        const doc = await docRef.get();

        if (!doc.exists) {
          profileContent.innerHTML = '<div class="loading">Profile not found.</div>';
          return;
        }

        const data = doc.data();
        renderProfile(data);
        await loadUserPosts(user.uid);
      } catch (error) {
        console.error('Error loading profile:', error);
        profileContent.innerHTML = '<div class="loading">Error loading profile.</div>';
      }
    }

    // Load user posts
    async function loadUserPosts(userId) {
      try {
        const postsQuery = await db.collection('posts')
          .where('authorId', '==', userId)
          .orderBy('createdAt', 'desc')
          .limit(3)
          .get();

        const posts = [];
        postsQuery.forEach(doc => {
          posts.push({ id: doc.id, ...doc.data() });
        });

        renderPosts(posts);
      } catch (error) {
        console.error('Error loading posts:', error);
        postsSection.innerHTML = '<div class="loading">Error loading posts.</div>';
      }
    }

    // Render profile HTML
    function renderProfile(data) {
      profileContent.innerHTML = `
        <div class="profile-card">
          <div class="profile-actions">
            <button class="btn-share" id="shareBtn">Share Profile</button>
          </div>
          
          <!-- Profile Header -->
          <div class="profile-header">
            <img src="${data.profilePhotoUrl || 'https://via.placeholder.com/150  '}" alt="Profile Photo" class="profile-photo">
            <div class="profile-info">
              <h1 class="profile-name">${data.name || 'Unknown User'}</h1>
              <div class="profile-slug">${data.slug ? '@' + data.slug : ''}${data.verified ? '<span class="verified-badge">‚úì Verified</span>' : ''}</div>
              <div class="join-date">Joined: ${formatDate(data.joinDate)}</div>
              <div class="email">${data.email || ''}</div>
            </div>
          </div>

          <!-- Bio Section -->
          <!-- Bio Section -->
          <div class="bio-section">
            <h2 class="section-title">Bio</h2>
            <p class="bio-text">${data.bio || 'No bio available.'}</p>
          </div>

          <!-- Stats Section -->
          <div class="profile-stats">
            <div class="stat-card">
              <div class="stat-value">${formatNumber(data.publicPostCount || 0)}</div>
              <div class="stat-label">Public Posts</div>
            </div>
          </div>
        </div>
      `;

 // Add share button functionality
document.getElementById('shareBtn').addEventListener('click', async () => {
  try {
    const currentUser = auth.currentUser;
    if (!currentUser) {
      alert('No user is currently logged in.');
      return;
    }

    const userDoc = await getDoc(doc(db, 'userPrivate', currentUser.uid)); 
    const userData = userDoc.data();

    if (userData && userData.slug) {
      const currentOrigin = window.location.origin; 
      const currentPath = window.location.pathname; 
      const newPath = currentPath.replace('/user_management/user_profile.html', `/public_user_manager/public_user_profile.html?=${userData.slug}`);

      // Final URL
      const shareUrl = currentOrigin + newPath;

      navigator.clipboard.writeText(shareUrl).then(() => {
        alert('Profile URL copied to clipboard!');
      }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('Failed to copy URL. Please try again.');
      });
    } else {
      alert('No profile slug available for sharing.');
    }
  } catch (error) {
    console.error('Error fetching user data: ', error);
    alert('Failed to retrieve profile data. Please try again.');
  }
});

    // Render posts HTML
    async function renderPosts(posts) {
      if (posts.length === 0) {
        postsSection.innerHTML = '<div class="loading">No posts found.</div>';
        return;
      }

      let postsHTML = `
        <div class="posts-section">
          <h2 class="section-title">Recent Posts</h2>
          <div class="posts-grid">
      `;

      for (const post of posts) {
        // Load comments for this post
        const commentsQuery = await db.collection('posts').doc(post.id).collection('comments')
          .orderBy('createdAt', 'desc')
          .limit(3)
          .get();

        const comments = [];
        commentsQuery.forEach(doc => {
          comments.push({ id: doc.id, ...doc.data() });
        });

        postsHTML += `
          <div class="post-card">
            <h3 class="post-title">${post.title || 'Untitled Post'}</h3>
            <p class="post-body">${post.body || 'No content available.'}</p>
            <div class="post-meta">
              <span class="post-author">By ${post.authorName || 'Anonymous'}</span>
              <span class="post-time">${timeAgo(post.createdAt)}</span>
            </div>
            <div class="post-meta">
              <span>üëç ${formatNumber(post.upvotesCount || 0)}</span>
              <span>üëé ${formatNumber(post.downvotesCount || 0)}</span>
              <span>üí¨ ${formatNumber(post.commentsCount || 0)}</span>
            </div>

            ${comments.length > 0 ? `
              <div class="comments-section">
                <h4>Recent Comments</h4>
                <div class="comments-grid">
                  ${comments.map(comment => `
                    <div class="comment-card">
                      <div class="comment-header">
                        <span class="comment-author">${comment.authorName || 'Anonymous'}</span>
                        <span class="comment-time">${timeAgo(comment.createdAt)}</span>
                      </div>
                      <p class="comment-body">${comment.body || ''}</p>
                    </div>
                  `).join('')}
                </div>
              </div>
            ` : ''}
          </div>
        `;
      }

      postsHTML += `
          </div>
          <div class="post-actions">
            <button class="btn-post" id="explore-btn">Explore</button>
            <button class="btn-post" id="show-all-btn">Show All Posts</button>
          </div>
        </div>
      `;

      postsSection.innerHTML = postsHTML;

      // Add event listeners for buttons
      document.getElementById('explore-btn').addEventListener('click', () => {
        window.location.href = '../posts.html';
      });

      document.getElementById('show-all-btn').addEventListener('click', () => {
        window.location.href = 'user_posts.html';
      });
    }

    // Auth state listener
    auth.onAuthStateChanged((user) => {
      if (user) {
        loadProfile();
      } else {
        profileContent.innerHTML = '<div class="loading">Please log in to view your profile.</div>';
        postsSection.innerHTML = '';
      }
    });

    // Logout functionality
    logoutBtn.addEventListener('click', () => {
      auth.signOut().then(() => {
        console.log('User signed out');
        window.location.href = 'index.html';
      }).catch((error) => {
        console.error('Sign out error:', error);
        alert('Error signing out. Please try again.');
      });
    });

    // Settings functionality
    settingsBtn.addEventListener('click', () => {
      window.location.href = 'settings.html';
    });

    // Initialize stars and handle loading overlay
    window.addEventListener('load', () => {
      createStars();

      // Simulate a minimum 2 second load time
      setTimeout(() => {
        loadingOverlay.classList.add('hidden');
      }, 3000);
    });
  </script>
</body>
</html>